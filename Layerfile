#Use an Ubuntu 18.04 base for our staging server
FROM vm/ubuntu:18.04

# To note: Layerfiles create entire VMs, *not* containers!

# Install python
RUN apt update && apt install -y \
    git nano zip bc make gcc curl python make

# This line copies the repository to /root in the runner
COPY . .
RUN ls

# Build kernel
SECRET ENV TG_TOKEN
RUN curl -OsSL https://gist.github.com/rama982/ce23f44d9d92940d601aa7f33a2d2318/raw/a454629d3dd7a28ce606f33fe4d58c99c4613001/build_kernel.sh
RUN bash build_kernel.sh $TG_TOKEN
